# Production values for anonymizer.lacambra.tech
# Override default values for production deployment

replicaCount: 2

image:
  repository: ghcr.io/alacambra/gdpr-anonymizer
  pullPolicy: IfNotPresent
  tag: "latest"

# Enable ingress with Let's Encrypt
ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-dev
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  hosts:
    - host: anonymizer.lacambra.tech
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: gdpr-anonymizer-tls
      hosts:
        - anonymizer.lacambra.tech

# Production resource limits
resources:
  limits:
    cpu: 500m
    memory: 256M
  requests:
    cpu: 200m
    memory: 256M

# Health probes - critical for avoiding 503 errors
livenessProbe:
  httpGet:
    path: /health
    port: 8000
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health/ready
    port: 8000
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Enable autoscaling for production
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

# Production configuration
config:
  llmProvider: "ollama"

  claude:
    model: "claude-3-5-sonnet-20241022"
    maxTokens: 4096
    temperature: 0.0

  openai:
    model: "gpt-4"
    maxTokens: 4096
    temperature: 0.0

  ollama:
    model: "phi4:14b"
    baseUrl: "http://10.60.60.100:11434" 
    authToken: "your-secret-token-here" 

  anonymization:
    maxIterations: 3
    validationThreshold: 0.8
    riskThreshold: 0.7

  logging:
    level: "INFO"
    format: "json"

# Secrets - provide via --set flag or external secret management
# DO NOT commit actual secrets to Git
# Not needed when using Ollama
secrets:
  anthropicApiKey: ""  # Set via: --set secrets.anthropicApiKey="your-key"
  openaiApiKey: ""     # Set via: --set secrets.openaiApiKey="your-key"
